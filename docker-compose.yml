services:
  # API Gateway - Único servicio activo
  api-gateway:
    build: ./api-gateway
    container_name: pharmavida_api_gateway
    env_file:
      - .env
    ports:
      - "8000:8000"
    volumes:
      # Montar socket de Docker para ejecutar contenedores
      - /var/run/docker.sock:/var/run/docker.sock
      # Montar credenciales AWS (opcional, también se pueden pasar las imágenes)
      - ~/.aws/credentials:/root/.aws/credentials:ro
    restart: unless-stopped
    networks:
      - pharmavida_network

# Red compartida (debe coincidir con la red de las BD's si están en el mismo host)
networks:
  pharmavida_network:
    driver: bridge